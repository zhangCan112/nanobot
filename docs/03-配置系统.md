# é…ç½®ç³»ç»Ÿè¯¦è§£

## ğŸ“‹ æ–‡ä»¶æ¦‚è¿°

`nanobot/config/schema.py` å®šä¹‰äº† nanobot çš„å®Œæ•´é…ç½®æ¶æ„ï¼Œä½¿ç”¨ **Pydantic** æ¡†æ¶å®ç°ç±»å‹å®‰å…¨çš„é…ç½®ç®¡ç†ã€‚

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.nanobot/config.json`

## ğŸ¯ é…ç½®å±‚æ¬¡ç»“æ„

```
Config (æ ¹é…ç½®)
â”œâ”€â”€ agents (Agent é…ç½®)
â”‚   â””â”€â”€ defaults (é»˜è®¤é…ç½®)
â”‚       â”œâ”€â”€ workspace: å·¥ä½œç©ºé—´è·¯å¾„
â”‚       â”œâ”€â”€ model: é»˜è®¤æ¨¡å‹
â”‚       â”œâ”€â”€ max_tokens: æœ€å¤§ä»¤ç‰Œæ•°
â”‚       â”œâ”€â”€ temperature: æ¸©åº¦å‚æ•°
â”‚       â””â”€â”€ max_tool_iterations: æœ€å¤§å·¥å…·è¿­ä»£æ¬¡æ•°
â”œâ”€â”€ channels (æ¸ é“é…ç½®)
â”‚   â”œâ”€â”€ whatsapp: WhatsApp é…ç½®
â”‚   â”œâ”€â”€ telegram: Telegram é…ç½®
â”‚   â”œâ”€â”€ discord: Discord é…ç½®
â”‚   â””â”€â”€ feishu: é£ä¹¦é…ç½®
â”œâ”€â”€ providers (LLM æä¾›å•†é…ç½®)
â”‚   â”œâ”€â”€ anthropic: Anthropic (Claude)
â”‚   â”œâ”€â”€ openai: OpenAI (GPT)
â”‚   â”œâ”€â”€ openrouter: OpenRouter (å¤šæ¨¡å‹ç½‘å…³)
â”‚   â”œâ”€â”€ deepseek: DeepSeek
â”‚   â”œâ”€â”€ groq: Groq
â”‚   â”œâ”€â”€ zhipu: æ™ºè°± AI
â”‚   â”œâ”€â”€ dashscope: é˜¿é‡Œäº‘é€šä¹‰åƒé—®
â”‚   â”œâ”€â”€ gemini: Google Gemini
â”‚   â”œâ”€â”€ moonshot: æœˆä¹‹æš—é¢
â”‚   â”œâ”€â”€ vllm: vLLM (æœ¬åœ°æ¨¡å‹)
â”‚   â””â”€â”€ aihubmix: AiHubMix (API ç½‘å…³)
â”œâ”€â”€ gateway (ç½‘å…³é…ç½®)
â”‚   â”œâ”€â”€ host: ç›‘å¬åœ°å€
â”‚   â””â”€â”€ port: ç›‘å¬ç«¯å£
â””â”€â”€ tools (å·¥å…·é…ç½®)
    â”œâ”€â”€ web: Web å·¥å…·é…ç½®
    â”‚   â””â”€â”€ search: æœç´¢é…ç½®
    â”‚       â”œâ”€â”€ api_key: Brave Search API Key
    â”‚       â””â”€â”€ max_results: æœ€å¤§ç»“æœæ•°
    â”œâ”€â”€ exec: Shell æ‰§è¡Œé…ç½®
    â”‚   â””â”€â”€ timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    â””â”€â”€ restrictToWorkspace: æ˜¯å¦é™åˆ¶åˆ°å·¥ä½œç©ºé—´
```

## ğŸ“ é…ç½®ç±»è¯¦è§£

### 1. WhatsAppConfig - WhatsApp æ¸ é“é…ç½®

```python
class WhatsAppConfig(BaseModel):
    """WhatsApp channel configuration."""
    enabled: bool = False
    bridge_url: str = "ws://localhost:3001"
    allow_from: list[str] = Field(default_factory=list)
```

**å­—æ®µè¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨ WhatsApp æ¸ é“
- `bridge_url`: WebSocket æ¡¥æ¥æœåŠ¡åœ°å€
- `allow_from`: å…è®¸çš„ç”µè¯å·ç ç™½åå•ï¼ˆç©ºåˆ—è¡¨è¡¨ç¤ºå…è®¸æ‰€æœ‰ï¼‰

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "channels": {
    "whatsapp": {
      "enabled": true,
      "bridge_url": "ws://localhost:3001",
      "allow_from": ["+1234567890", "+9876543210"]
    }
  }
}
```

### 2. TelegramConfig - Telegram æ¸ é“é…ç½®

```python
class TelegramConfig(BaseModel):
    """Telegram channel configuration."""
    enabled: bool = False
    token: str = ""  # Bot token from @BotFather
    allow_from: list[str] = Field(default_factory=list)
    proxy: str | None = None  # HTTP/SOCKS5 ä»£ç†
```

**å­—æ®µè¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨ Telegram æ¸ é“
- `token`: ä» @BotFather è·å–çš„ Bot Token
- `allow_from`: å…è®¸çš„ç”¨æˆ· ID æˆ–ç”¨æˆ·åç™½åå•
- `proxy`: ä»£ç† URLï¼ˆå¦‚ `http://127.0.0.1:7890` æˆ– `socks5://127.0.0.1:1080`ï¼‰

**è·å– Bot Tokenï¼š**
1. åœ¨ Telegram æœç´¢ `@BotFather`
2. å‘é€ `/newbot` å‘½ä»¤
3. æŒ‰æç¤ºè®¾ç½®æœºå™¨äººåç§°
4. å¤åˆ¶ç”Ÿæˆçš„ token

**è·å–ç”¨æˆ· IDï¼š**
1. åœ¨ Telegram æœç´¢ `@userinfobot`
2. å‘é€ä»»æ„æ¶ˆæ¯
3. æŸ¥çœ‹è¿”å›çš„ç”¨æˆ· ID

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "channels": {
    "telegram": {
      "enabled": true,
      "token": "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",
      "allow_from": ["123456789", "username"],
      "proxy": "socks5://127.0.0.1:1080"
    }
  }
}
```

### 3. FeishuConfig - é£ä¹¦æ¸ é“é…ç½®

```python
class FeishuConfig(BaseModel):
    """Feishu/Lark channel configuration using WebSocket long connection."""
    enabled: bool = False
    app_id: str = ""
    app_secret: str = ""
    encrypt_key: str = ""
    verification_token: str = ""
    allow_from: list[str] = Field(default_factory=list)
```

**å­—æ®µè¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨é£ä¹¦æ¸ é“
- `app_id`: é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨ ID
- `app_secret`: é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨ Secret
- `encrypt_key`: äº‹ä»¶è®¢é˜…åŠ å¯†å¯†é’¥ï¼ˆé•¿è¿æ¥æ¨¡å¼å¯é€‰ï¼‰
- `verification_token`: äº‹ä»¶è®¢é˜…éªŒè¯ä»¤ç‰Œï¼ˆé•¿è¿æ¥æ¨¡å¼å¯é€‰ï¼‰
- `allow_from`: å…è®¸çš„ç”¨æˆ· open_id ç™½åå•

**åˆ›å»ºé£ä¹¦åº”ç”¨ï¼š**
1. è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/app)
2. åˆ›å»ºæ–°åº”ç”¨
3. å¯ç”¨ **Bot** èƒ½åŠ›
4. æ·»åŠ æƒé™ï¼š`im:message`ï¼ˆå‘é€æ¶ˆæ¯ï¼‰
5. æ·»åŠ äº‹ä»¶ï¼š`im.message.receive_v1`ï¼ˆæ¥æ”¶æ¶ˆæ¯ï¼‰
   - é€‰æ‹© **é•¿è¿æ¥** æ¨¡å¼
6. è·å– App ID å’Œ App Secret
7. å‘å¸ƒåº”ç”¨

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx",
      "encryptKey": "",
      "verificationToken": "",
      "allowFrom": []
    }
  }
}
```

### 4. DiscordConfig - Discord æ¸ é“é…ç½®

```python
class DiscordConfig(BaseModel):
    """Discord channel configuration."""
    enabled: bool = False
    token: str = ""  # Bot token from Discord Developer Portal
    allow_from: list[str] = Field(default_factory=list)
    gateway_url: str = "wss://gateway.discord.gg/?v=10&encoding=json"
    intents: int = 37377  # GUILDS + GUILD_MESSAGES + DIRECT_MESSAGES + MESSAGE_CONTENT
```

**å­—æ®µè¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨ Discord æ¸ é“
- `token`: Discord Developer Portal è·å–çš„ Bot Token
- `allow_from`: å…è®¸çš„ç”¨æˆ· ID ç™½åå•
- `gateway_url`: Discord WebSocket ç½‘å…³åœ°å€
- `intents`: Discord Intentsï¼ˆæƒé™æ„å›¾ï¼‰

**è·å– Bot Tokenï¼š**
1. è®¿é—® [Discord Developer Portal](https://discord.com/developers/applications)
2. åˆ›å»ºåº”ç”¨
3. åˆ›å»º Bot å¹¶å¤åˆ¶ Token
4. å¯ç”¨ **MESSAGE CONTENT INTENT**
5. ï¼ˆå¯é€‰ï¼‰å¯ç”¨ **SERVER MEMBERS INTENT**

**è·å–ç”¨æˆ· IDï¼š**
1. Discord è®¾ç½® â†’ é«˜çº§ â†’ å¯ç”¨ **å¼€å‘è€…æ¨¡å¼**
2. å³é”®ç‚¹å‡»ä½ çš„å¤´åƒ â†’ **å¤åˆ¶ç”¨æˆ· ID**

**é‚€è¯· Bot åˆ°æœåŠ¡å™¨ï¼š**
1. OAuth2 â†’ URL Generator
2. Scopes: `bot`
3. Bot Permissions: `Send Messages`, `Read Message History`
4. æ‰“å¼€ç”Ÿæˆçš„é‚€è¯· URL

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "channels": {
    "discord": {
      "enabled": true,
      "token": "MTIzNDU2Nzg5MA.xxxxx.xxxxx",
      "allowFrom": ["123456789012345678"],
      "gatewayUrl": "wss://gateway.discord.gg/?v=10&encoding=json",
      "intents": 37377
    }
  }
}
```

### 5. AgentDefaults - Agent é»˜è®¤é…ç½®

```python
class AgentDefaults(BaseModel):
    """Default agent configuration."""
    workspace: str = "~/.nanobot/workspace"
    model: str = "anthropic/claude-opus-4-5"
    max_tokens: int = 8192
    temperature: float = 0.7
    max_tool_iterations: int = 20
```

**å­—æ®µè¯´æ˜ï¼š**
- `workspace`: å·¥ä½œç©ºé—´è·¯å¾„ï¼ˆæ”¯æŒ `~` å±•å¼€ï¼‰
- `model`: é»˜è®¤ä½¿ç”¨çš„ LLM æ¨¡å‹
- `max_tokens`: æœ€å¤§ç”Ÿæˆä»¤ç‰Œæ•°
- `temperature`: æ¸©åº¦å‚æ•°ï¼ˆ0.0-2.0ï¼Œè¶Šä½è¶Šç¡®å®šï¼‰
- `max_tool_iterations`: å·¥å…·è°ƒç”¨çš„æœ€å¤§è¿­ä»£æ¬¡æ•°

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "agents": {
    "defaults": {
      "workspace": "~/.nanobot/workspace",
      "model": "anthropic/claude-sonnet-4-5",
      "maxTokens": 8192,
      "temperature": 0.7,
      "maxToolIterations": 20
    }
  }
}
```

### 6. ProviderConfig - LLM æä¾›å•†é…ç½®

```python
class ProviderConfig(BaseModel):
    """LLM provider configuration."""
    api_key: str = ""
    api_base: str | None = None
    extra_headers: dict[str, str] | None = None
```

**å­—æ®µè¯´æ˜ï¼š**
- `api_key`: API å¯†é’¥
- `api_base`: API åŸºç¡€ URLï¼ˆç”¨äºè‡ªå®šä¹‰ç«¯ç‚¹ï¼‰
- `extra_headers`: é¢å¤–çš„ HTTP è¯·æ±‚å¤´ï¼ˆå¦‚ AiHubMix çš„ APP-Codeï¼‰

### 7. ProvidersConfig - å¤šæä¾›å•†é…ç½®

```python
class ProvidersConfig(BaseModel):
    """Configuration for LLM providers."""
    anthropic: ProviderConfig = Field(default_factory=ProviderConfig)
    openai: ProviderConfig = Field(default_factory=ProviderConfig)
    openrouter: ProviderConfig = Field(default_factory=ProviderConfig)
    deepseek: ProviderConfig = Field(default_factory=ProviderConfig)
    groq: ProviderConfig = Field(default_factory=ProviderConfig)
    zhipu: ProviderConfig = Field(default_factory=ProviderConfig)
    dashscope: ProviderConfig = Field(default_factory=ProviderConfig)
    vllm: ProviderConfig = Field(default_factory=ProviderConfig)
    gemini: ProviderConfig = Field(default_factory=ProviderConfig)
    moonshot: ProviderConfig = Field(default_factory=ProviderConfig)
    aihubmix: ProviderConfig = Field(default_factory=ProviderConfig)
```

**é…ç½®ç¤ºä¾‹ï¼š**

#### OpenRouterï¼ˆæ¨èï¼‰
```json
{
  "providers": {
    "openrouter": {
      "apiKey": "sk-or-v1-xxxxxxxxxxxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "anthropic/claude-opus-4-5"
    }
  }
}
```

#### Anthropic (Claude)
```json
{
  "providers": {
    "anthropic": {
      "apiKey": "sk-ant-xxxxxxxxxxxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "claude-opus-4-5"
    }
  }
}
```

#### OpenAI (GPT)
```json
{
  "providers": {
    "openai": {
      "apiKey": "sk-proj-xxxxxxxxxxxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "gpt-4o"
    }
  }
}
```

#### vLLM (æœ¬åœ°æ¨¡å‹)
```json
{
  "providers": {
    "vllm": {
      "apiKey": "dummy",
      "apiBase": "http://localhost:8000/v1"
    }
  },
  "agents": {
    "defaults": {
      "model": "meta-llama/Llama-3.1-8B-Instruct"
    }
  }
}
```

#### AiHubMix (API ç½‘å…³)
```json
{
  "providers": {
    "aihubmix": {
      "apiKey": "xxxxxxxxxxxx",
      "extraHeaders": {
        "APP-Code": "your-app-code"
      }
    }
  },
  "agents": {
    "defaults": {
      "model": "claude-3-5-sonnet-20241022"
    }
  }
}
```

### 8. ToolsConfig - å·¥å…·é…ç½®

```python
class ToolsConfig(BaseModel):
    """Tools configuration."""
    web: WebToolsConfig = Field(default_factory=WebToolsConfig)
    exec: ExecToolConfig = Field(default_factory=ExecToolConfig)
    restrict_to_workspace: bool = False
```

**é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "tools": {
    "web": {
      "search": {
        "apiKey": "BSAxXxxxxxxxxxxxx",
        "maxResults": 5
      }
    },
    "exec": {
      "timeout": 60
    },
    "restrictToWorkspace": true
  }
}
```

**å®‰å…¨ç‰¹æ€§ - restrictToWorkspaceï¼š**
- å¯ç”¨åï¼Œæ‰€æœ‰æ–‡ä»¶å·¥å…·å’Œ Shell å·¥å…·å°†é™åˆ¶åœ¨å·¥ä½œç©ºé—´ç›®å½•å†…
- é˜²æ­¢è·¯å¾„éå†å’Œè¶Šæƒè®¿é—®
- **ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®å¯ç”¨**

### 9. Config - æ ¹é…ç½®ç±»

```python
class Config(BaseSettings):
    """Root configuration for nanobot."""
    agents: AgentsConfig = Field(default_factory=AgentsConfig)
    channels: ChannelsConfig = Field(default_factory=ChannelsConfig)
    providers: ProvidersConfig = Field(default_factory=ProvidersConfig)
    gateway: GatewayConfig = Field(default_factory=GatewayConfig)
    tools: ToolsConfig = Field(default_factory=ToolsConfig)
    
    class Config:
        env_prefix = "NANOBOT_"
        env_nested_delimiter = "__"
```

**ç¯å¢ƒå˜é‡æ”¯æŒï¼š**
å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®ï¼š
```bash
export NANOBOT_AGENTS__DEFAULTS__MODEL="gpt-4o"
export NANOBOT_TOOLS__RESTRICT_TO_WORKSPACE="true"
export NANOBOT_PROVIDERS__OPENAI__API_KEY="sk-xxx"
```

## ğŸ”§ æ ¸å¿ƒæ–¹æ³•

### 1. workspace_path - å·¥ä½œç©ºé—´è·¯å¾„

```python
@property
def workspace_path(self) -> Path:
    """Get expanded workspace path."""
    return Path(self.agents.defaults.workspace).expanduser()
```

**åŠŸèƒ½ï¼š** è‡ªåŠ¨å±•å¼€ `~` ä¸ºç”¨æˆ·ä¸»ç›®å½•

### 2. get_provider - è·å–æä¾›å•†é…ç½®

```python
def get_provider(self, model: str | None = None) -> ProviderConfig | None:
    """Get matched provider config. Falls back to first available."""
    model = (model or self.agents.defaults.model).lower()
    p = self.providers
    
    # å…³é”®å­— â†’ æä¾›å•†æ˜ å°„ï¼ˆé¡ºåºå¾ˆé‡è¦ï¼šç½‘å…³ä¼˜å…ˆï¼‰
    keyword_map = {
        "aihubmix": p.aihubmix, "openrouter": p.openrouter,
        "deepseek": p.deepseek, "anthropic": p.anthropic, "claude": p.anthropic,
        "openai": p.openai, "gpt": p.openai, "gemini": p.gemini,
        "zhipu": p.zhipu, "glm": p.zhipu, "zai": p.zhipu,
        "dashscope": p.dashscope, "qwen": p.dashscope,
        "groq": p.groq, "moonshot": p.moonshot, "kimi": p.moonshot, "vllm": p.vllm,
    }
    
    # æ ¹æ®æ¨¡å‹åç§°åŒ¹é…
    for kw, provider in keyword_map.items():
        if kw in model and provider.api_key:
            return provider
    
    # å›é€€ï¼šç½‘å…³ä¼˜å…ˆï¼Œç„¶åæ˜¯ç‰¹å®šæä¾›å•†
    all_providers = [
        p.openrouter, p.aihubmix, p.anthropic, p.openai, p.deepseek,
        p.gemini, p.zhipu, p.dashscope, p.moonshot, p.vllm, p.groq
    ]
    return next((pr for pr in all_providers if pr.api_key), None)
```

**å·¥ä½œåŸç†ï¼š**
1. æ ¹æ®æ¨¡å‹åç§°ä¸­çš„å…³é”®å­—åŒ¹é…æä¾›å•†
2. å¦‚æœåŒ¹é…åˆ°æœ‰ API Key çš„æä¾›å•†ï¼Œç›´æ¥è¿”å›
3. å¦åˆ™ï¼ŒæŒ‰ä¼˜å…ˆçº§æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæœ‰ API Key çš„æä¾›å•†
4. ä¼˜å…ˆçº§ï¼šç½‘å…³ï¼ˆOpenRouter, AiHubMixï¼‰> ç‰¹å®šæä¾›å•†

**ç¤ºä¾‹ï¼š**
```python
# æ¨¡å‹: "anthropic/claude-opus-4-5"
# åŒ¹é…: p.anthropic (å› ä¸º "anthropic" åœ¨æ¨¡å‹åä¸­)

# æ¨¡å‹: "gpt-4o"
# åŒ¹é…: p.openai (å› ä¸º "gpt" åœ¨æ¨¡å‹åä¸­)

# æ¨¡å‹: "claude-3-5-sonnet"
# åŒ¹é…: p.anthropic (å› ä¸º "claude" åœ¨æ¨¡å‹åä¸­)
```

### 3. get_api_key - è·å– API Key

```python
def get_api_key(self, model: str | None = None) -> str | None:
    """Get API key for the given model. Falls back to first available key."""
    p = self.get_provider(model)
    return p.api_key if p else None
```

### 4. get_api_base - è·å– API åŸºç¡€ URL

```python
_GATEWAY_DEFAULTS = {
    "openrouter": "https://openrouter.ai/api/v1",
    "aihubmix": "https://aihubmix.com/v1"
}

def get_api_base(self, model: str | None = None) -> str | None:
    """Get API base URL for the given model. Applies default URLs for known gateways."""
    p = self.get_provider(model)
    
    # ä¼˜å…ˆä½¿ç”¨é…ç½®çš„ api_base
    if p and p.api_base:
        return p.api_base
    
    # ä¸ºå·²çŸ¥ç½‘å…³åº”ç”¨é»˜è®¤ URL
    for name, url in self._GATEWAY_DEFAULTS.items():
        if p == getattr(self.providers, name):
            return url
    
    return None
```

## ğŸ“‹ å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "agents": {
    "defaults": {
      "workspace": "~/.nanobot/workspace",
      "model": "anthropic/claude-sonnet-4-5",
      "maxTokens": 8192,
      "temperature": 0.7,
      "maxToolIterations": 20
    }
  },
  "channels": {
    "telegram": {
      "enabled": true,
      "token": "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",
      "allowFrom": ["123456789"],
      "proxy": null
    },
    "whatsapp": {
      "enabled": false,
      "bridgeUrl": "ws://localhost:3001",
      "allowFrom": []
    },
    "discord": {
      "enabled": false,
      "token": "",
      "allowFrom": [],
      "gatewayUrl": "wss://gateway.discord.gg/?v=10&encoding=json",
      "intents": 37377
    },
    "feishu": {
      "enabled": false,
      "appId": "",
      "appSecret": "",
      "encryptKey": "",
      "verificationToken": "",
      "allowFrom": []
    }
  },
  "providers": {
    "openrouter": {
      "apiKey": "sk-or-v1-xxxxxxxxxxxx",
      "apiBase": null,
      "extraHeaders": null
    },
    "anthropic": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "openai": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "deepseek": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "groq": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "zhipu": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "dashscope": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "gemini": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "moonshot": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    },
    "vllm": {
      "apiKey": "dummy",
      "apiBase": "http://localhost:8000/v1",
      "extraHeaders": null
    },
    "aihubmix": {
      "apiKey": "",
      "apiBase": null,
      "extraHeaders": null
    }
  },
  "gateway": {
    "host": "0.0.0.0",
    "port": 18790
  },
  "tools": {
    "web": {
      "search": {
        "apiKey": "BSAxXxxxxxxxxxxxx",
        "maxResults": 5
      }
    },
    "exec": {
      "timeout": 60
    },
    "restrictToWorkspace": false
  }
}
```

## ğŸ”‘ è·å– API Key

### OpenRouterï¼ˆæ¨èï¼‰
- ç½‘ç«™: https://openrouter.ai/keys
- ç‰¹ç‚¹: è®¿é—®æ‰€æœ‰ä¸»æµæ¨¡å‹ï¼Œç»Ÿä¸€è®¡è´¹

### Anthropic (Claude)
- ç½‘ç«™: https://console.anthropic.com
- æ¨¡å‹: Claude Opus, Sonnet, Haiku

### OpenAI (GPT)
- ç½‘ç«™: https://platform.openai.com
- æ¨¡å‹: GPT-4o, GPT-4 Turbo, GPT-3.5

### DeepSeek
- ç½‘ç«™: https://platform.deepseek.com
- æ¨¡å‹: DeepSeek-V3, DeepSeek-Coder

### Google Gemini
- ç½‘ç«™: https://aistudio.google.com
- æ¨¡å‹: Gemini Pro, Gemini Ultra

### æ™ºè°± AI (GLM)
- ç½‘ç«™: https://open.bigmodel.cn
- æ¨¡å‹: GLM-4, GLM-3-Turbo

### é˜¿é‡Œäº‘é€šä¹‰åƒé—®
- ç½‘ç«™: https://dashscope.console.aliyun.com
- æ¨¡å‹: Qwen-Max, Qwen-Plus, Qwen-Turbo

### æœˆä¹‹æš—é¢
- ç½‘ç«™: https://platform.moonshot.cn
- æ¨¡å‹: Kimi, Kimi-k2.5

### Groq
- ç½‘ç«™: https://console.groq.com
- ç‰¹ç‚¹: è¶…å¿«æ¨ç†é€Ÿåº¦ï¼Œå…è´¹ Whisper è¯­éŸ³è½¬å½•

### Brave Search (Web æœç´¢)
- ç½‘ç«™: https://brave.com/search/api/
- ç”¨é€”: Web æœç´¢å·¥å…·

## ğŸ¨ é…ç½®æœ€ä½³å®è·µ

### 1. å®‰å…¨æ€§
- **ç”Ÿäº§ç¯å¢ƒ**: è®¾ç½® `restrictToWorkspace: true`
- **æ¸ é“è®¿é—®**: è®¾ç½® `allowFrom` ç™½åå•
- **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç¯å¢ƒå˜é‡

### 2. æ€§èƒ½ä¼˜åŒ–
- **temperature**: 0.3-0.7ï¼ˆä»»åŠ¡å‹ä»»åŠ¡ç”¨ä½å€¼ï¼Œåˆ›æ„å‹ç”¨é«˜å€¼ï¼‰
- **max_tokens**: æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼ˆé•¿æ–‡æ¡£ç”Ÿæˆç”¨ 8192+ï¼‰
- **max_tool_iterations**: å¤æ‚ä»»åŠ¡ç”¨ 30-50ï¼Œç®€å•ä»»åŠ¡ç”¨ 10-20

### 3. å¤šæä¾›å•†é…ç½®
```json
{
  "providers": {
    "openrouter": {
      "apiKey": "sk-or-v1-xxx"
    },
    "groq": {
      "apiKey": "gsk_xxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "anthropic/claude-sonnet-4-5"
    }
  }
}
```
- ä¸»æ¨¡å‹ç”¨ OpenRouter
- Groq ç”¨äºå¿«é€Ÿå“åº”å’Œè¯­éŸ³è½¬å½•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [01-é¡¹ç›®æ¦‚è¿°.md](./01-é¡¹ç›®æ¦‚è¿°.md) - é¡¹ç›®æ•´ä½“ä»‹ç»
- [02-CLIå‘½ä»¤ç³»ç»Ÿ.md](./02-CLIå‘½ä»¤ç³»ç»Ÿ.md) - CLI å‘½ä»¤è¯¦è§£
- [04-Agentæ ¸å¿ƒ.md](./04-Agentæ ¸å¿ƒ.md) - Agent æ ¸å¿ƒé€»è¾‘